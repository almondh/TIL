# The YouTube Video Recommendation System

### Abstract
- 유저들에게 유저 활동을 바탕으로 개인화된 비디오를 추천
- 새로운 알고리즘에 대한 정보 일부 제공


### 1. Introduction
- 개인화 추천은 풍부한 정보 환경에서의 **key**
- **Pure Search(Querying)** 와 **Browsing(directed or non-directed)** 의 결합으로 사용자가 효과적으로 정보를 탐색할 수 있도록 함
- 본 논문은 이전 활동을 기반으로 서명된 사용자에게 개인화된 비디오 세트를 제공하는 권장사항을 제시
- 권장사항은 http://www.youtube.com 와 http://www.youtube.com/videos 의 찾아보기 페이지에서 처리

#### 1.1 Goals
- 유저의 관심사에 부합하는 고품질 동영상 제공
- 이를 위해서 사용자들의 참여를 유지하고, 사용자의 최근 활동을 반영하는 것이 필수적
- 현재 추천시스템 : 예측변수 X, 상위 N개 추천자
- 유튜브의 다른 주요 목표 : 사용자의 프라이버시 유지, 백엔드 시스템이 노출하는 개인화 사용자 데이터에 대한 제어권을 제공하는 것

#### 1.2 Challenges
- 업로드 된 비디오에는 메타데이터가 없거나 빈 경우가 많음
- 대부분의 비디오가 10분 미만의 짧은 형태
- 사용자의 상호작용이 상대적으로 짧고 noisy
- 넷플릭스/아마존과 비교했을 때 유튜브는 지속적으로 **추천의 신선함을 요구** -> 짧은 수명 주기



### 2. System Design
- 전반적인 추천시스템은 위의 목표/과제에 의거
- 추천이 합리적, 최신, 신선함, 사용자의 최근 행동과의 관련, 사용자가 이 비디오가 왜 추천되었는지 이해하는 것이 중요
- 추천 동영상 set은 사용자의 개인활동(watched, favorited, liked videos)를 기반으로 공동방문한 비디오그래프를 기반으로 확장
- 동영상 set은 관련성/다양성을 위해 다양한 신호를 사용하여 순위를 매김
- 공학적 관점에서 시스템의 개별요소가 분리되어 전체 시스템의 복잡성을 최소화 하기 위해 노력 -> 실패 시 복원하거나 부분 실패시 저하시키기 위해

#### 2.1 Input data
- 컨텐츠 데이터(raw video streams), 메타데이터(제목, 설명, etc)
- 사용자 활동 데이터
  - 명시적 활동(영상 순위, 선호/좋아하는 영상, 구독하기)
  - 암시적 활동(비디오를 보고 상호작용한 결과로 생성되는 데이터: 영상을 얼마나 긴 시간동안 봤는지 등)
- 위의 모든 활동에 대해서 처리해야 할 데이터는 상당히 noisy함
  - 사용자 데이터는 사이트의 사용자활동의 일부일 뿐이며 참여와 행복을 간접측정
  - 영상 하나를 다 봤다고 해서 사용자가 실제로 그 영상을 좋아했다고 결론짓기에는 불충분
- 영상 길이와 사용자 참여 수준은 모두 signal 품질에 영향을 미침
- 특히, 암시적 활동 데이터는 비동기적으로 생성되며 불완전할 수 있음

#### 2.2 Related data
- 추천시스템의 구성요소 중 하나는 비디오 vi에서 유사하거나 관련있는 비디오 Ri에 대해 mapping을 구성하는 것
- 사용자가 주어진 비디오 v를 본 후에 볼 수 있는 유사비디오를 정의 
- 매핑 계산을 위해서 association rule mining(1) 또는 co-visitation counts 기술 사용
- 사용자 시청 기록의 세션을 고려하여, 주어진 시간(일반적으로 24시간)동안, 각 비디오 쌍(vi,vj)이 얼마나 자주 세션 내에서 함께 보였는지를 계산
<br>

- cij에 의한 공동방문수를 나타내면서 각 비디오의 관련성 점수를 다음과 같이 정의
- ![equation](https://latex.codecogs.com/png.latex?%5Cinline%20%5Cdpi%7B150%7D%20r%28v_%7Bi%7D%2C%20v_%7Bj%7D%29%20%3D%20%5Cfrac%7Bc_%7Bij%7D%7D%7Bf%28v_%7Bi%7D%2C%20v_%7Bj%7D%29%7D)
  - ci, cj : 각각의 vi, vj의 모든 세션에서 발생하는 총 발생 횟수
  - f(vi, vj) : 시드 비디오와 후보 비디오의 글로벌 인기도를 모두 고려한 정규화 함수
  - ci는 모든 후보관련 동영상에 대해 동일하고, 세팅 내에서 무시될 수 있기 때문에 글로벌 인기도에 대해서만 정규화 시킴

- 이후 vi에 대한 관련 영상 set을 점수 r(vi, vj)로 선정된 상위 N개의 후보 영상들을 선정(최소 점수 상한값 또한 부과)
- 위와 같은 방식으로는 신뢰할 수 없는 관련영상을 계산할 수 없는 영상 : 전체 조회수가 너무 낮은 영상들
  - 해결해야 할 문제 : presentation bias, noisy watch data, etc
  - 전체 조회수 대신 사용할 수 있는 소스들 : 순서, 시청기록의 타임스탬프, 비디오의 메타데이터, etc
  
#### 2.3 Generating Recommendation Candidates
- 개인화된 추천 계산을 위해 연관비디오 연결 규칙과 유저의 개인활동을 결합
  - 시청한 영상(잠재적으로 특정 임계값 초과할 수 있음), 명시적으로 선호된 영상(좋아요, 순위권영상, 플레이리스트에 추가된 영상) 포함 가능
  - 이 비디오들의 결합을 seed set라고 부름
- 주어진 seed set S에 대한 후보영상추천을 얻기 위해서 관련 영상 그래프의 모서리를 따라서 확장
  - seed set내의 각각의 vi에 대해 연관영상 Ri를 고려
  - 이러한 관련 비디오 세트의 조합을 C1로 표기
- ![equation](https://latex.codecogs.com/gif.latex?%5Cinline%20C_%7B1%7D%28S%29%20%3D%5Cbigcup%20_%7Bvi%5Cin%20S%7D%20Ri)
  - 대부분의 경우에는 C1이 크고 다양한 영상후보를 생성하기에 충분
    - 실제 모든 영상에 대한 관련영상은 상당히 좁고, seed 영상과 매우 유사함 
    - 좁은 추천으로 이어져 관심사에 가까운 콘텐츠 추천은 가능하지만, 새로운 동엿앙을 추천하는데는 실패.

- 추천 범위를 넓히기 위해, 관련 영상 그래프에 대해 제한된 타동적 폐쇄(limited transitive closure)를 통해 후보 set 확대
- Cn : seed set의 영상에서 n의 거리 내에 도달할 수 있는 영상 set으로 정의
- ![equation](https://latex.codecogs.com/gif.latex?%5Cinline%20C_%7Bn%7D%28S%29%20%3D%5Cbigcup%20_%7Bvi%5Cin%20C_%7Bn-1%7D%7D%20Ri)
  - C0 = S 는 재귀함수의 기본케이스(이 경우 C1에 대해 (2)와 동일한 정의)
  
- 최종 후보 set Cfinal 의 추천은 다음으로 정의
- ![equation](https://latex.codecogs.com/gif.latex?%5Cinline%20C_%7Bfinal%7D%28S%29%20%3D%28%5Cbigcup%20_%7Bvi%5Cin%20S%7D%5E%7BN%7D%20Ci%29%20%5Csetminus%20S)
  - 관련 영상 그래프의 높은 분기 계수(?high branching factor) 때문에, 작은 seed set을 가진 사용자에게도 광범위하고 넓은 추천을 제공함
  - 후보 set의 각각의 영상은 seed set의 하나 이상의 영상과 연관되어 있음
  - 사용자에게 추천의 이유를 제공하고 순위 결정을 위해 연관후보 seed를 추적?

#### 2.4 Ranking
- 단계별로 후보 영상을 만든 후 signal을 사용하여 점수로 순위를 매김
- signal 종류
  1. 영상 품질(Video quality) : 사용자와 관계없이 영상이 인식될 가능성을 판단하기위해 사용
    - 조회수, 시청률, 댓글, 선호도, 공유활동, 업로드 시간
  2. 사용자 특이성(User specificity) : 사용자 취향/선호도와 일치하는 영상 활성화를 위해 사용
    - 시청 기록(history), 조회수, 영상 시청 시간
  3. 다양화(Diversification)
 
- 1, 2의 선형조합을 통해 후보 영상 순위 목록 생성
- 4~60개 사이만 표시 -> 카테고리 전반에 걸쳐서 관련성/다양성 사이의 균형 최적화
- 단일 seed 영상과 관련된 권장 사항의 수에 제약 or 같은 채널의 권장 사항 수를 제한 or 주제 클러스터링 or 내용분석

#### 2.5 User Interface
